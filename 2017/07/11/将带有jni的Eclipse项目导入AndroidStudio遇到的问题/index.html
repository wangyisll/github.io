<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>将带有jni的Eclipse项目导入AndroidStudio遇到的问题 | 喵了个呜的小宇宙</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">将带有jni的Eclipse项目导入AndroidStudio遇到的问题</h1><a id="logo" href="/.">喵了个呜的小宇宙</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Accueil</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> À propos</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Search"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">将带有jni的Eclipse项目导入AndroidStudio遇到的问题</h1><div class="post-meta"><span class="date">Jul 11, 2017</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i> Hits</i></i></span><a href="/2017/07/11/将带有jni的Eclipse项目导入AndroidStudio遇到的问题/#comments" class="comment-count">Livre d'or</a></div><div class="post-content"><p>当然前提是本地已经配置好了ndk的环境</p>
<a id="more"></a>
<p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/Android/daoru4.png" alt=""></p>
<h1 id="1-NDK-integration-is-deprecated-in-the-current-plugin"><a href="#1-NDK-integration-is-deprecated-in-the-current-plugin" class="headerlink" title="1. NDK integration is deprecated in the current plugin"></a>1. NDK integration is deprecated in the current plugin</h1><p>首次编译遇到一个错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">FAILURE: Build failed with an exception.</div><div class="line"></div><div class="line">* What went wrong:</div><div class="line">Execution failed for task &apos;:app:compileDebugNdk&apos;.</div><div class="line">&gt; Error: NDK integration is deprecated in the current plugin.  Consider trying the new experimental plugin.  For details, see http://tools.android.com/tech-docs/new-build-system/gradle-experimental.  Set &quot;$USE_DEPRECATED_NDK=true&quot; in gradle.properties to continue using the current NDK integration.</div></pre></td></tr></table></figure>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/Android/daoru1.png" alt=""></p>
<p>先在module下新建文件，<strong>gradle.properties</strong></p>
<p>文件中写上一句 <strong>android.useDeprecatedNdk=true</strong></p>
<p>然后重新build就没这个问题了</p>
<h1 id="2-Native-C-C-source-code-is-found-but-it-seems-that-NDK-option-is-not-configured"><a href="#2-Native-C-C-source-code-is-found-but-it-seems-that-NDK-option-is-not-configured" class="headerlink" title="2.  Native C/C++ source code is found, but it seems that NDK option is not configured"></a>2.  Native C/C++ source code is found, but it seems that NDK option is not configured</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Warning: Native C/C++ source code is found, but it seems that NDK option is not configured.  Note that if you have an Android.mk, it is not used for compilation.  The recommended workaround is to remove the default jni source code directory by adding: </div><div class="line"> android &#123;</div><div class="line">    sourceSets &#123;</div><div class="line">        main &#123;</div><div class="line">            jni.srcDirs = []</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">to build.gradle, manually compile the code with ndk-build, and then place the resulting shared object in src/main/jniLibs.</div></pre></td></tr></table></figure>
<p>build失败在<strong>Gradle Console</strong>中会打印这个信息</p>
<p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/Android/daoru2.png" alt=""></p>
<h2 id="解决-1"><a href="#解决-1" class="headerlink" title="解决"></a>解决</h2><p>其中一种方法就是，就按他提示的吧，加上</p>
<pre><code>sourceSets {
        main {
            jni.srcDirs = []
        }
    }
</code></pre><p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/Android/daoru3.png" alt=""></p>
<p>再次build ，：</p>
<p><strong>BUILD SUCCESSFUL</strong></p>
</div><div class="tags"><a href="/tags/Android/">Android</a></div><div class="post-share"></div><div class="post-nav"><a href="/2017/07/20/Android-socket的基本使用，发送文字和图片以及心跳/" class="pre">Android-socket的基本使用，发送文字和图片以及心跳</a><a href="/2017/07/07/AVL树的旋转图解和简单实现/" class="next">AVL树的旋转图解和简单实现</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Contenus</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-NDK-integration-is-deprecated-in-the-current-plugin"><span class="toc-text">1. NDK integration is deprecated in the current plugin</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#解决"><span class="toc-text">解决</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Native-C-C-source-code-is-found-but-it-seems-that-NDK-option-is-not-configured"><span class="toc-text">2.  Native C/C++ source code is found, but it seems that NDK option is not configured</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#解决-1"><span class="toc-text">解决</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Récent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/07/31/ArrayList和LinkedList的简单实现/">ArrayList和LinkedList的简单实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/Android-socket的基本使用，发送文字和图片以及心跳/">Android-socket的基本使用，发送文字和图片以及心跳</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/11/将带有jni的Eclipse项目导入AndroidStudio遇到的问题/">将带有jni的Eclipse项目导入AndroidStudio遇到的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/07/AVL树的旋转图解和简单实现/">AVL树的旋转图解和简单实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/07/查找二叉树的简单实现/">查找二叉树的简单实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/ADB常用命令/">ADB常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/23/Android解压中文乱码/">Android解压中文乱码</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/23/通过轮廓简单实现一个圆图/">通过轮廓简单实现一个圆图</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/15/Kotlin让属性只能被赋值一次且不能为空/">Kotlin让属性只能被赋值一次且不能为空</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/14/对一个KotlinAPP的copy/">对一个KotlinAPP的copy</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"><a href="/tags/文字识别/" style="font-size: 15px;">文字识别</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/动画/" style="font-size: 15px;">动画</a> <a href="/tags/多线程/" style="font-size: 15px;">多线程</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/版本控制/" style="font-size: 15px;">版本控制</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/翻墙/" style="font-size: 15px;">翻墙</a> <a href="/tags/源码/" style="font-size: 15px;">源码</a> <a href="/tags/读书/" style="font-size: 15px;">读书</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archive</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> À suivre</i></div><ul></ul><a href="http://blog.csdn.net/qq_25806863" title="csdn" target="_blank">csdn</a><ul></ul><a href="https://github.com/wangyisll" title="github" target="_blank">github</a><ul></ul><a href="http://www.jianshu.com/u/cb3133f5a1bd" title="简书" target="_blank">简书</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Sitemap</a> |  <a href="/atom.xml">RSS</a> |  <a href="/about/">À propos</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">喵了个呜.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script></body></html>