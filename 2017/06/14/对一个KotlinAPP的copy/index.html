<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>对一个KotlinAPP的copy | 喵了个呜的小宇宙</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="最近看了下Kotlin。随便找了个简单的地址就开始了copy。真的是copy，代码结构，布局，图片等都是copy的。 本文地址： http://blog.csdn.net/qq_25806863/article/details/73209612 主要是为了体验一下Kotlin在Android开发中是什么样子的。">
<meta name="keywords" content="Android,Kotlin">
<meta property="og:type" content="article">
<meta property="og:title" content="对一个KotlinAPP的copy">
<meta property="og:url" content="http://blog.miaolegewu.top/2017/06/14/对一个KotlinAPP的copy/index.html">
<meta property="og:site_name" content="喵了个呜的小宇宙">
<meta property="og:description" content="最近看了下Kotlin。随便找了个简单的地址就开始了copy。真的是copy，代码结构，布局，图片等都是copy的。 本文地址： http://blog.csdn.net/qq_25806863/article/details/73209612 主要是为了体验一下Kotlin在Android开发中是什么样子的。">
<meta property="og:image" content="http://privateimage.oss-cn-hongkong.aliyuncs.com/kotlin/kotlin1.png">
<meta property="og:updated_time" content="2017-06-29T00:29:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="对一个KotlinAPP的copy">
<meta name="twitter:description" content="最近看了下Kotlin。随便找了个简单的地址就开始了copy。真的是copy，代码结构，布局，图片等都是copy的。 本文地址： http://blog.csdn.net/qq_25806863/article/details/73209612 主要是为了体验一下Kotlin在Android开发中是什么样子的。">
<meta name="twitter:image" content="http://privateimage.oss-cn-hongkong.aliyuncs.com/kotlin/kotlin1.png">
  
    <link rel="alternate" href="/atom.xml" title="喵了个呜的小宇宙" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">喵了个呜的小宇宙</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.miaolegewu.top"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-对一个KotlinAPP的copy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/14/对一个KotlinAPP的copy/" class="article-date">
  <time datetime="2017-06-14T01:40:39.000Z" itemprop="datePublished">2017-06-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      对一个KotlinAPP的copy
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近看了下Kotlin。随便找了个简单的地址就开始了copy。真的是copy，代码结构，布局，图片等都是copy的。</p>
<p>本文地址： <a href="http://blog.csdn.net/qq_25806863/article/details/73209612" target="_blank" rel="external">http://blog.csdn.net/qq_25806863/article/details/73209612</a></p>
<p>主要是为了体验一下Kotlin在Android开发中是什么样子的。</p>
<a id="more"></a>
<p>copy对象就是几百个Gank的其中一个：<a href="https://github.com/onlyloveyd/GankIOWithKotlin" target="_blank" rel="external">https://github.com/onlyloveyd/GankIOWithKotlin</a></p>
<p>也可以他博客看一下 <a href="http://blog.csdn.net/poorkick/article/details/72510645" target="_blank" rel="external">http://blog.csdn.net/poorkick/article/details/72510645</a></p>
<p>非常感谢大神的分享，copy的结果就是：<a href="https://github.com/wangyisll/gankapplication/tree/master" target="_blank" rel="external">https://github.com/wangyisll/gankapplication/tree/master</a></p>
<p>图什么就不放了，跟原来那个一样，就是颜色变了一下</p>
<p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/kotlin/kotlin1.png" alt=""></p>
<p>因为使用了<a href="https://kotlinlang.org/docs/tutorials/android-plugin.html" target="_blank" rel="external">Kotlin Android Extensions</a>，所以我觉得没必要再用<strong>ButterKnife</strong>了，所以就删掉了。</p>
<p>哈哈，下面记录一下copy中感受到的不同，都只是一部分示例，更多的可以看代码进行比较。</p>
<p>这是大神的java版 <a href="https://github.com/onlyloveyd/GankIOClient" target="_blank" rel="external">https://github.com/onlyloveyd/GankIOClient</a></p>
<p>这是大神的kotlin版  <a href="https://github.com/onlyloveyd/GankIOWithKotlin" target="_blank" rel="external">https://github.com/onlyloveyd/GankIOWithKotlin</a></p>
<p>具体语法还是看<a href="https://www.kotlincn.net/docs/reference/" target="_blank" rel="external">官方语法文档</a>吧。</p>
<h1 id="1-Kotlin-Android-Extensions"><a href="#1-Kotlin-Android-Extensions" class="headerlink" title="1.Kotlin Android Extensions"></a>1.Kotlin Android Extensions</h1><p>这是Kotlin官方的扩展，可以省去finViewById</p>
<p>如在<code>activity_main.xml</code>中有这样的布局：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/toolBar"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span></div><div class="line">        <span class="attr">android:fitsSystemWindows</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:titleTextColor</span>=<span class="string">"@color/white"</span>/&gt;</div><div class="line">        </div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上面的id为<code>toolBar</code>，所以在代码中可以直接使用id来表示这个空间，跟ButterKnife一样。</p>
<p>先引入:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> kotlinx.android.synthetic.main.activity_main.*</div></pre></td></tr></table></figure>
<p>然后就能直接在代码中使用了：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">setSupportActionBar(toolBar)</div></pre></td></tr></table></figure>
<h1 id="2-对属性的引用"><a href="#2-对属性的引用" class="headerlink" title="2.对属性的引用"></a>2.对属性的引用</h1><p>在Kotlin中，控件的大部分get和set的属性都能直接向下面这样用：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tvTitle.setText(<span class="string">"a"</span>)</div><div class="line"><span class="comment">//写成</span></div><div class="line">tvTitle.text = <span class="string">"a"</span></div></pre></td></tr></table></figure>
<h1 id="3-单例"><a href="#3-单例" class="headerlink" title="3.单例"></a>3.单例</h1><p>在原来的额网络请求类单例是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpMethods</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BASE_URL = <span class="string">"http://gank.io/api/"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_TIMEOUT = <span class="number">5</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Retrofit retrofit;</div><div class="line">    <span class="keyword">private</span> ContentService contentService;</div><div class="line">    <span class="keyword">private</span> OkHttpClient mOkHttpClient;</div><div class="line"></div><div class="line">    <span class="comment">//构造方法私有</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HttpMethods</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">//手动创建一个OkHttpClient并设置超时时间</span></div><div class="line">        OkHttpClient.Builder httpClientBuilder = <span class="keyword">new</span> OkHttpClient.Builder();</div><div class="line">        httpClientBuilder.connectTimeout(DEFAULT_TIMEOUT, TimeUnit.SECONDS);</div><div class="line">        mOkHttpClient = httpClientBuilder.build();</div><div class="line"></div><div class="line">        retrofit = <span class="keyword">new</span> Retrofit.Builder().client(mOkHttpClient)</div><div class="line">                .addConverterFactory(GsonConverterFactory.create())</div><div class="line">                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())</div><div class="line">                .baseUrl(BASE_URL)</div><div class="line">                .build();</div><div class="line"></div><div class="line">        contentService = retrofit.create(ContentService.class);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//获取单例</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HttpMethods <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 用于获取干货数据</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> subscriber 由调用者传过来的观察者对象</div><div class="line">     * <span class="doctag">@param</span> category   类别</div><div class="line">     * <span class="doctag">@param</span> pagesize   请求数据个数</div><div class="line">     * <span class="doctag">@param</span> pagenum    页码</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getData</span><span class="params">(Observer&lt;DataBean&gt; subscriber, String category, String pagesize,</span></span></div><div class="line">            <span class="keyword">int</span> pagenum) &#123;</div><div class="line">        contentService.getContent(category, pagesize, pagenum)</div><div class="line">                .subscribeOn(Schedulers.io())</div><div class="line">                .unsubscribeOn(Schedulers.io())</div><div class="line">                .observeOn(AndroidSchedulers.mainThread())</div><div class="line">                .subscribe(subscriber);</div><div class="line">    。。。</div><div class="line">    <span class="comment">//在访问HttpMethods时创建单例</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HttpMethods INSTANCE = <span class="keyword">new</span> HttpMethods();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在Kotlin中，单例直接这样写：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">object</span> RetrofitClient &#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">val</span> retrofit: Retrofit</div><div class="line">    <span class="keyword">private</span> <span class="keyword">val</span> api: RetrofitApiService</div><div class="line">    <span class="keyword">private</span> <span class="keyword">val</span> baseUrl = <span class="string">"http://gank.io/api/"</span></div><div class="line"></div><div class="line">    init &#123;</div><div class="line">        <span class="keyword">val</span> httpclient = OkHttpClient.Builder()</div><div class="line">        httpclient.connectTimeout(<span class="number">10</span>, TimeUnit.SECONDS)</div><div class="line">        retrofit = Retrofit.Builder().client(httpclient.build())</div><div class="line">                .addConverterFactory(GsonConverterFactory.create())</div><div class="line">                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())</div><div class="line">                .baseUrl(baseUrl)</div><div class="line">                .build()</div><div class="line">        api = retrofit.create(RetrofitApiService::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 获取干货数据</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getData</span><span class="params">(subscriber: <span class="type">Observer</span>&lt;<span class="type">TypeData</span>&gt;, category: <span class="type">String</span>, pageSize: <span class="type">String</span>, pageNum: <span class="type">Int</span>)</span></span> &#123;</div><div class="line">        api.getContent(category, pageSize, pageNum)</div><div class="line">                .subscribeOn(Schedulers.io())</div><div class="line">                .unsubscribeOn(Schedulers.io())</div><div class="line">                .observeOn(AndroidSchedulers.mainThread())</div><div class="line">                .safeSubscribe(subscriber)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>class变成了object,然后下面这样使用就是单例的，那些方法就跟变成了static一样，直接调用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RetrofitClient.getData(...)</div></pre></td></tr></table></figure>
<h1 id="4-常量类的定义"><a href="#4-常量类的定义" class="headerlink" title="4.常量类的定义"></a>4.常量类的定义</h1><p>java中的常量类一般是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">public class Constant &#123;</div><div class="line">    public static final long ONE_SECOND = 1000;</div><div class="line">    public static final long ONE_MINUTE = ONE_SECOND * 60;</div><div class="line">    public static final long ONE_HOUR = ONE_MINUTE * 60;</div><div class="line">    public static final long ONE_DAY = ONE_HOUR * 24;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在Kotlin中可以写成这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">object Constant &#123;</div><div class="line">    val ONE_SECOND: Long = 1000</div><div class="line">    val ONE_MINUTE = ONE_SECOND * 60</div><div class="line">    val ONE_HOUR = ONE_MINUTE * 60</div><div class="line">    val ONE_DAY = ONE_HOUR * 24</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用起来都是一样的 <code>Constant.ONE_SECOND</code>，但是省掉了好多<code>public static final</code></p>
<h1 id="5-集合的定义"><a href="#5-集合的定义" class="headerlink" title="5.集合的定义"></a>5.集合的定义</h1><p>java中集合的初始化是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> HashMap&lt;String, Integer&gt; sTypeColor = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;() &#123;</div><div class="line">        &#123;</div><div class="line">            put(<span class="string">"Android"</span>, R.drawable.bg_android_tag);</div><div class="line">            put(<span class="string">"iOS"</span>, R.drawable.bg_ios_tag);</div><div class="line">            put(<span class="string">"瞎推荐"</span>, R.drawable.bg_rec_tag);</div><div class="line">            put(<span class="string">"拓展资源"</span>, R.drawable.bg_res_tag);</div><div class="line">            put(<span class="string">"App"</span>, R.drawable.bg_app_tag);</div><div class="line">            put(<span class="string">"福利"</span>, R.drawable.bg_bonus_tag);</div><div class="line">            put(<span class="string">"前端"</span>, R.drawable.bg_js_tag);</div><div class="line">            put(<span class="string">"休息视频"</span>, R.drawable.bg_video_tag);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;String&gt; sCategoryList = <span class="keyword">new</span> ArrayList&lt;String&gt;() &#123;</div><div class="line">        &#123;</div><div class="line">            add(<span class="string">"all"</span>);</div><div class="line">            add(<span class="string">"Android"</span>);</div><div class="line">            add(<span class="string">"瞎推荐"</span>);</div><div class="line">            add(<span class="string">"iOS"</span>);</div><div class="line">            add(<span class="string">"前端"</span>);</div><div class="line">            add(<span class="string">"拓展资源"</span>);</div><div class="line">            add(<span class="string">"App"</span>);</div><div class="line">            add(<span class="string">"休息视频"</span>);</div><div class="line">            add(<span class="string">"福利"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<p>在Kotlin中也可以写成类似的：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sTypeColor: HashMap&lt;String, <span class="built_in">Int</span>&gt; = <span class="keyword">object</span> : HashMap&lt;String, <span class="built_in">Int</span>&gt;() &#123;</div><div class="line">        init &#123;</div><div class="line">            put(<span class="string">"Android"</span>, R.drawable.bg_android_tag)</div><div class="line">            put(<span class="string">"iOS"</span>, R.drawable.bg_ios_tag)</div><div class="line">            put(<span class="string">"瞎推荐"</span>, R.drawable.bg_rec_tag)</div><div class="line">            put(<span class="string">"拓展资源"</span>, R.drawable.bg_res_tag)</div><div class="line">            put(<span class="string">"App"</span>, R.drawable.bg_app_tag)</div><div class="line">            put(<span class="string">"福利"</span>, R.drawable.bg_bonus_tag)</div><div class="line">            put(<span class="string">"前端"</span>, R.drawable.bg_js_tag)</div><div class="line">            put(<span class="string">"休息视频"</span>, R.drawable.bg_video_tag)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> sCategoryList: ArrayList&lt;String&gt; = <span class="keyword">object</span> : ArrayList&lt;String&gt;() &#123;</div><div class="line">        init &#123;</div><div class="line">            add(<span class="string">"all"</span>)</div><div class="line">            add(<span class="string">"Android"</span>)</div><div class="line">            add(<span class="string">"瞎推荐"</span>)</div><div class="line">            add(<span class="string">"iOS"</span>)</div><div class="line">            add(<span class="string">"前端"</span>)</div><div class="line">            add(<span class="string">"拓展资源"</span>)</div><div class="line">            add(<span class="string">"App"</span>)</div><div class="line">            add(<span class="string">"休息视频"</span>)</div><div class="line">            add(<span class="string">"福利"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>更可以写成下面的简单的：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sTypeColor = mutableMapOf(<span class="string">"Android"</span> to R.drawable.bg_android_tag,</div><div class="line">            <span class="string">"iOS"</span> to R.drawable.bg_ios_tag,</div><div class="line">            <span class="string">"瞎推荐"</span> to R.drawable.bg_rec_tag,</div><div class="line">            <span class="string">"拓展资源"</span> to R.drawable.bg_res_tag,</div><div class="line">            <span class="string">"App"</span> to R.drawable.bg_app_tag,</div><div class="line">            <span class="string">"福利"</span> to R.drawable.bg_bonus_tag,</div><div class="line">            <span class="string">"前端"</span> to R.drawable.bg_js_tag,</div><div class="line">            <span class="string">"休息视频"</span> to R.drawable.bg_video_tag)</div><div class="line"></div><div class="line">    <span class="keyword">var</span> sCategoryList = mutableListOf(<span class="string">"all"</span>, <span class="string">"Android"</span>, <span class="string">"瞎推荐"</span>, <span class="string">"iOS"</span>, <span class="string">"前端"</span>, <span class="string">"拓展资源"</span>, <span class="string">"App"</span>, <span class="string">"休息视频"</span>, <span class="string">"福利"</span>)</div></pre></td></tr></table></figure>
<p>又省了好多代码….</p>
<h1 id="6-anko的startActivity"><a href="#6-anko的startActivity" class="headerlink" title="6.anko的startActivity"></a>6.anko的startActivity</h1><p>启动一个Activity是很常用的，通过anko可以快速启动一个Activity：</p>
<p>先导入，一般都是自动引用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import org.jetbrains.anko.startActivity</div></pre></td></tr></table></figure>
<p>然后使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">startActivity&lt;OrderActivity&gt;()</div></pre></td></tr></table></figure>
<p>也可以带参数：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">startActivity&lt;WebActivity&gt;(<span class="string">"URL"</span> to <span class="keyword">data</span>.url)</div><div class="line"><span class="comment">//在WebActivity中接收参数，下面的intent其实就是getIntent()，extras其实就是getExtras()</span></div><div class="line">intent.extras.getString(<span class="string">"URL"</span>)</div></pre></td></tr></table></figure>
<h1 id="7-分支语句"><a href="#7-分支语句" class="headerlink" title="7.分支语句"></a>7.分支语句</h1><p>Kotlin中用when代替了switch</p>
<p>用法也是类似的：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onOptionsItemSelected</span><span class="params">(item: <span class="type">MenuItem</span>?)</span></span>: <span class="built_in">Boolean</span> &#123;</div><div class="line">        <span class="keyword">when</span>(item?.itemId)&#123;</div><div class="line">            R.id.refresh -&gt; wv.reload()</div><div class="line">            R.id.share -&gt; url?.let &#123; share(it) &#125;</div><div class="line">            R.id.openinbrowse -&gt; url?.let &#123; browse(it) &#125;</div><div class="line">            R.id.copyurl -&gt; &#123;</div><div class="line">                <span class="keyword">val</span> clipboard = getSystemService(Context.CLIPBOARD_SERVICE) <span class="keyword">as</span> ClipboardManager</div><div class="line">                clipboard.text = url</div><div class="line">                Snackbar.make(wv,<span class="string">"已复制到剪切板"</span>,Snackbar.LENGTH_SHORT).show()</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item)</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>而且还能直接作为返回值：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getItem</span><span class="params">(position: <span class="type">Int</span>)</span></span>: Fragment? &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">when</span> (position) &#123;</div><div class="line">        <span class="number">0</span> -&gt; DailyFragment.getInstance()</div><div class="line">        <span class="number">1</span> -&gt; SortFragment.getInstance()</div><div class="line">        <span class="number">2</span> -&gt; MindFragment.getInstance()</div><div class="line">        <span class="keyword">else</span> -&gt; AboutFragment.getInstance()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="8-let的使用和空判断"><a href="#8-let的使用和空判断" class="headerlink" title="8. let的使用和空判断"></a>8. let的使用和空判断</h1><p>经常会有这样的需求：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (dailyBean.getResults().getAndroid() != <span class="keyword">null</span>) &#123;</div><div class="line">                    mVisitableList.addAll(dailyBean.getResults().getAndroid());</div><div class="line">                &#125;</div></pre></td></tr></table></figure>
<p>判断一个东西不为空，然后执行一段代码。一行可能看不出来，下面这样呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(DailyBean dailyBean)</span> </span>&#123;</div><div class="line">              。。。</div><div class="line">                <span class="keyword">if</span> (dailyBean.getResults().getAndroid() != <span class="keyword">null</span>) &#123;</div><div class="line">                    mVisitableList.addAll(dailyBean.getResults().getAndroid());</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (dailyBean.getResults().getApp() != <span class="keyword">null</span>) &#123;</div><div class="line">                    mVisitableList.addAll(dailyBean.getResults().getApp());</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (dailyBean.getResults().getBonus() != <span class="keyword">null</span>) &#123;</div><div class="line">                    mVisitableList.addAll(dailyBean.getResults().getBonus());</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (dailyBean.getResults().getIOS() != <span class="keyword">null</span>) &#123;</div><div class="line">                    mVisitableList.addAll(dailyBean.getResults().getIOS());</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (dailyBean.getResults().getJs() != <span class="keyword">null</span>) &#123;</div><div class="line">                    mVisitableList.addAll(dailyBean.getResults().getJs());</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (dailyBean.getResults().getRec() != <span class="keyword">null</span>) &#123;</div><div class="line">                    mVisitableList.addAll(dailyBean.getResults().getRec());</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (dailyBean.getResults().getRes() != <span class="keyword">null</span>) &#123;</div><div class="line">                    mVisitableList.addAll(dailyBean.getResults().getRes());</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (dailyBean.getResults().getVideo() != <span class="keyword">null</span>) &#123;</div><div class="line">                    mVisitableList.addAll(dailyBean.getResults().getVideo());</div><div class="line">                &#125;</div><div class="line">                。。。</div><div class="line">            &#125;</div></pre></td></tr></table></figure>
<p>如果用let,会少很多,作用是一样的：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onNext</span><span class="params">(dailyData: <span class="type">DailyData</span>)</span></span> &#123;</div><div class="line">              ...</div><div class="line">                    dailyData.results.android?.let &#123; mVisitableList.addAll(it) &#125;</div><div class="line">                    dailyData.results.app?.let &#123; mVisitableList.addAll(it) &#125;</div><div class="line">                    dailyData.results.bonus?.let &#123; mVisitableList.addAll(it) &#125;</div><div class="line">                    dailyData.results.ios?.let &#123; mVisitableList.addAll(it) &#125;</div><div class="line">                    dailyData.results.js?.let &#123; mVisitableList.addAll(it) &#125;</div><div class="line">                    dailyData.results.rec?.let &#123; mVisitableList.addAll(it) &#125;</div><div class="line">                    dailyData.results.res?.let &#123; mVisitableList.addAll(it) &#125;</div><div class="line">                    dailyData.results.video?.let &#123; mVisitableList.addAll(it) &#125;</div><div class="line">             ...</div><div class="line">            &#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.miaolegewu.top/2017/06/14/对一个KotlinAPP的copy/" data-id="cj4hps3hv003sdsfyri63fgbf" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Kotlin/">Kotlin</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/06/15/Kotlin让属性只能被赋值一次且不能为空/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nieuwer</strong>
      <div class="article-nav-title">
        
          Kotlin让属性只能被赋值一次且不能为空
        
      </div>
    </a>
  
  
    <a href="/2017/05/31/Android多线程-AsyncTask工作流程-源码/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title">Android多线程-AsyncTask工作流程(源码)</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kotlin/">Kotlin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动画/">动画</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文字识别/">文字识别</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/源码/">源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本控制/">版本控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/翻墙/">翻墙</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书/">读书</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Kotlin/" style="font-size: 11.43px;">Kotlin</a> <a href="/tags/java/" style="font-size: 14.29px;">java</a> <a href="/tags/动画/" style="font-size: 17.14px;">动画</a> <a href="/tags/多线程/" style="font-size: 15.71px;">多线程</a> <a href="/tags/工具/" style="font-size: 12.86px;">工具</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/文字识别/" style="font-size: 11.43px;">文字识别</a> <a href="/tags/源码/" style="font-size: 10px;">源码</a> <a href="/tags/版本控制/" style="font-size: 10px;">版本控制</a> <a href="/tags/翻墙/" style="font-size: 10px;">翻墙</a> <a href="/tags/设计模式/" style="font-size: 18.57px;">设计模式</a> <a href="/tags/读书/" style="font-size: 10px;">读书</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/27/ADB常用命令/">ADB常用命令</a>
          </li>
        
          <li>
            <a href="/2017/06/23/Android解压中文乱码/">Android解压中文乱码</a>
          </li>
        
          <li>
            <a href="/2017/06/23/通过轮廓简单实现一个圆图/">通过轮廓简单实现一个圆图</a>
          </li>
        
          <li>
            <a href="/2017/06/15/Kotlin让属性只能被赋值一次且不能为空/">Kotlin让属性只能被赋值一次且不能为空</a>
          </li>
        
          <li>
            <a href="/2017/06/14/对一个KotlinAPP的copy/">对一个KotlinAPP的copy</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 喵了个呜<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>