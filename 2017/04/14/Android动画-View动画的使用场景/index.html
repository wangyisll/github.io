<!DOCTYPE html><html lang="null"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Android动画-View动画的使用场景 | 喵了个呜的小宇宙</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Android动画-View动画的使用场景</h1><a id="logo" href="/.">喵了个呜的小宇宙</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Accueil</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> À propos</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Search"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Android动画-View动画的使用场景</h1><div class="post-meta"><span class="date">Apr 14, 2017</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i> Hits</i></i></span><a href="/2017/04/14/Android动画-View动画的使用场景/#comments" class="comment-count">Livre d'or</a></div><div class="post-content"><p>View动画的一个特点就是，他的动画仅仅是动的View的绘制地方，View真正的位置并没有一起动画。</p>
<p>View除了会用作直接作用页面中的View外，通常还用用在下面一些地方<br><a id="more"></a></p>
<h1 id="PopupWindow的动画"><a href="#PopupWindow的动画" class="headerlink" title="PopupWindow的动画"></a>PopupWindow的动画</h1><h2 id="原效果"><a href="#原效果" class="headerlink" title="原效果"></a>原效果</h2><p>先做一个PopupWindow,这个PopupWindow的View只有一个背景图片，一只大猫。：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initWindow</span><span class="params">()</span> </span>&#123;</div><div class="line">        View view = <span class="keyword">new</span> View(<span class="keyword">this</span>);</div><div class="line">        view.setBackground(getDrawable(R.drawable.xiaomao));</div><div class="line">        popupWindow = <span class="keyword">new</span> PopupWindow(view, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>然后给按钮的点击事件设置为显示PopupWindow：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">btnRun.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                <span class="keyword">if</span> (popupWindow.isShowing()) &#123;</div><div class="line">                    popupWindow.dismiss();</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    popupWindow.showAsDropDown(btnRun);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p>这时的效果是这样的：</p>
<p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/gif/yuantanchuang.gif" alt=""></p>
<h2 id="加动画"><a href="#加动画" class="headerlink" title="加动画"></a>加动画</h2><p>那么现在加上一个动画，首先要定义动画。</p>
<ol>
<li>进入的动画：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"100%"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></div><div class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"1"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span></div><div class="line">        /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<ol>
<li>消失的动画：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"100%"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></div><div class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"1"</span></div><div class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span></div><div class="line">        /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<ol>
<li>做成一个style,在res/values/styles.xml文件里加上：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"pop_anim"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowEnterAnimation"</span>&gt;</span>@anim/pop_in<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowExitAnimation"</span>&gt;</span>@anim/pop_out<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<ol>
<li>设置动画</li>
</ol>
<p>这一步就很简单，就加一行代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initWindow</span><span class="params">()</span> </span>&#123;</div><div class="line">        View view = <span class="keyword">new</span> View(<span class="keyword">this</span>);</div><div class="line">        view.setBackground(getDrawable(R.drawable.xiaomao));</div><div class="line">        popupWindow = <span class="keyword">new</span> PopupWindow(view, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);</div><div class="line">        popupWindow.setAnimationStyle(R.style.pop_anim);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>这时效果就成下面那样了：</p>
<p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/gif/houtanchuang.gif" alt=""></p>
<h1 id="Activity过场动画"><a href="#Activity过场动画" class="headerlink" title="Activity过场动画"></a>Activity过场动画</h1><h2 id="通过overridePendingTransition"><a href="#通过overridePendingTransition" class="headerlink" title="通过overridePendingTransition"></a>通过overridePendingTransition</h2><p>这种方法写着简单但是不好用，通过overridePendingTransition，他的两个参数分别是新Activity进入时的动画和旧Activity退出时的动画.如果设置为0则没有动画。</p>
<p>这个方法必须跟在startActivity()或finish()后面才会生效。</p>
<p>还是先定义两个动画：</p>
<p>进入时的动画：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"100%"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></div><div class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"1"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span></div><div class="line">        /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>退出时的动画:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"-100%"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></div><div class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"1"</span></div><div class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span></div><div class="line">        /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>跳转时调用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">startActivity(<span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>,SecondActivity.class));</div><div class="line">overridePendingTransition(R.anim.activity_in,R.anim.activity_out);</div></pre></td></tr></table></figure>
<p>效果：</p>
<p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/gif/activity1.gif" alt=""></p>
<h2 id="也是通过style"><a href="#也是通过style" class="headerlink" title="也是通过style"></a>也是通过style</h2><p>首先看res/values/styles.xml。定义了一个叫ActivityAnim的style，里面有四个属性，分表代表下面的含义</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>activityOpenEnterAnimation</td>
<td>打开一个新的Activity时，要显示的新的Activit执行的动画</td>
</tr>
<tr>
<td>activityOpenExitAnimation</td>
<td>打开一个新的Activity时，当前的旧的Activit执行的动画</td>
</tr>
<tr>
<td>activityCloseEnterAnimation</td>
<td>关闭一个activity时，要显示的上一个Activity执行的动画</td>
</tr>
<tr>
<td>activityCloseExitAnimation</td>
<td>关闭一个activity时，被关闭的Activity执行的动画</td>
</tr>
</tbody>
</table>
<p>这四个动画可以针对需要只设置需要的。</p>
<p>把<code>ActivityAnim</code>设置给APP要用的主题AppTheme的<code>android:windowAnimationStyle</code>属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.DarkActionBar"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorAccent"</span>&gt;</span>@color/colorAccent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowAnimationStyle"</span>&gt;</span>@style/ActivityAnim<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"ActivityAnim"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:activityOpenEnterAnimation"</span>&gt;</span>@anim/activity_in<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:activityOpenExitAnimation"</span>&gt;</span>@anim/activity_out<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:activityCloseEnterAnimation"</span>&gt;</span>@anim/activity_close_in<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:activityCloseExitAnimation"</span>&gt;</span>@anim/activity_close_out<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在后再清单文件里引用这个主题:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">package</span>=<span class="string">"com.sunlinlin.animademo"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">application</span></span></div><div class="line">        <span class="attr">android:allowBackup</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:icon</span>=<span class="string">"@mipmap/ic_launcher"</span></div><div class="line">        <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></div><div class="line">        <span class="attr">android:roundIcon</span>=<span class="string">"@mipmap/ic_launcher_round"</span></div><div class="line">        <span class="attr">android:supportsRtl</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">".MainActivity"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">".SecondActivity"</span>&gt;</span><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上面的四个动画分别是：</p>
<p>activity_in：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"100%"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></div><div class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"1"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>activity_out:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"-100%"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></div><div class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"1"</span></div><div class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>activity_close_in:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"-100%"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></div><div class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"1"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>activity_close_out:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"100%"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></div><div class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"1"</span></div><div class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>最终的效果是：</p>
<p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/gif/activity2.gif" alt=""></p>
<h1 id="给ViewGroup的子控件加进场动画"><a href="#给ViewGroup的子控件加进场动画" class="headerlink" title="给ViewGroup的子控件加进场动画"></a>给ViewGroup的子控件加进场动画</h1><p>LayoutAnimation是作用于ViewGroup的，用来指定ViewGroup的子控件出现的动画</p>
<p>先做一个子控件出现的动画,从之前随便选个<code>activity_in.xml</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">translate</span></span></div><div class="line">        <span class="attr">android:fromXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toXDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:fromYDelta</span>=<span class="string">"100%"</span></div><div class="line">        <span class="attr">android:toYDelta</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">alpha</span></span></div><div class="line">        <span class="attr">android:fromAlpha</span>=<span class="string">"0"</span></div><div class="line">        <span class="attr">android:toAlpha</span>=<span class="string">"1"</span></div><div class="line">        <span class="attr">android:duration</span>=<span class="string">"2000"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
<p>准备好了动画，接下来有两种方法，也是xml和java</p>
<h2 id="通过XML"><a href="#通过XML" class="headerlink" title="通过XML"></a>通过XML</h2><p>然后新建一个动画文件,这里叫<code>anim_layout.xml</code>,这里有三个属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>android:delay</td>
<td>可以取值为数值，百分数，或百分数p。表示两个子控件执行出场动画的间隔时间，为0时，所有控件的动画没有延迟全部开始执行；为1时表示等上一个控件动画执行完毕才开始执行下一个；为0.5时表示等上一个控件动画执行一半开始执行下一个。可以大于1。。。当这个值为百分数时，如50%，表示这个延迟时间是当前动画执行时间的50%。。。当这个值是百分数p的时候，如50%p,表示这个延迟时间是父View的动画时间的50%。</td>
</tr>
<tr>
<td>android:animationOrder</td>
<td>有三个值：：normal表示按正常顺序出现。random表示乱序出现。reverse表示反序出现。</td>
</tr>
<tr>
<td>android:animation</td>
<td>指定出现时要执行的动画</td>
</tr>
</tbody>
</table>
<p><code>anim_layout.xml</code>文件代码,设置上一个动画执行五分之一时开始下一个动画，倒序执行：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">layoutAnimation</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:delay</span>=<span class="string">"0.2"</span></div><div class="line">    <span class="attr">android:animationOrder</span>=<span class="string">"reverse"</span></div><div class="line">    <span class="attr">android:animation</span>=<span class="string">"@anim/activity_in"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">layoutAnimation</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后在Activity的布局文件中，将一个LinearLayout通过<code>android:layoutAnimation</code>加上了这个动画：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/ll"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_below</span>=<span class="string">"@+id/btn_back"</span></div><div class="line">        <span class="attr">android:layoutAnimation</span>=<span class="string">"@anim/anim_layout"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:text</span>=<span class="string">"哈哈"</span> /&gt;</div><div class="line">        ...</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后进入这个Activity时就会看到这个效果：</p>
<p><img src="http://privateimage.oss-cn-hongkong.aliyuncs.com/gif/activity3.gif" alt=""></p>
<h2 id="通过java"><a href="#通过java" class="headerlink" title="通过java"></a>通过java</h2><p>这里不需要建新的文件了。觉得比上面的方便许多，效果跟上图是一样的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ll = (LinearLayout) findViewById(R.id.ll);</div><div class="line">Animation animation = AnimationUtils.loadAnimation(<span class="keyword">this</span>,R.anim.activity_in);</div><div class="line">LayoutAnimationController controller = <span class="keyword">new</span> LayoutAnimationController(animation);</div><div class="line">controller.setDelay(<span class="number">0.2f</span>);</div><div class="line">controller.setOrder(LayoutAnimationController.ORDER_REVERSE);</div><div class="line">ll.setLayoutAnimation(controller);</div></pre></td></tr></table></figure></div><div class="tags"><a href="/tags/Android/">Android</a><a href="/tags/动画/">动画</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/04/14/Android动画-属性动画-ValueAnimator/" class="pre">Android动画-属性动画-ValueAnimator</a><a href="/2017/04/13/Android动画-补间动画,插值器/" class="next">Android动画-补间动画,插值器</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Contenus</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PopupWindow的动画"><span class="toc-text">PopupWindow的动画</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#原效果"><span class="toc-text">原效果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#加动画"><span class="toc-text">加动画</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Activity过场动画"><span class="toc-text">Activity过场动画</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#通过overridePendingTransition"><span class="toc-text">通过overridePendingTransition</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#也是通过style"><span class="toc-text">也是通过style</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#给ViewGroup的子控件加进场动画"><span class="toc-text">给ViewGroup的子控件加进场动画</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#通过XML"><span class="toc-text">通过XML</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通过java"><span class="toc-text">通过java</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Récent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/ADB常用命令/">ADB常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/23/Android解压中文乱码/">Android解压中文乱码</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/23/通过轮廓简单实现一个圆图/">通过轮廓简单实现一个圆图</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/15/Kotlin让属性只能被赋值一次且不能为空/">Kotlin让属性只能被赋值一次且不能为空</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/14/对一个KotlinAPP的copy/">对一个KotlinAPP的copy</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/31/Android多线程-AsyncTask工作流程-源码/">Android多线程-AsyncTask工作流程(源码)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/23/Android多线程-AsyncTask的使用和问题(取消，并行，屏幕切换)/">Android多线程-AsyncTask的使用和问题(取消，并行，屏幕切换)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/15/Android纯的二维码扫描界面和功能-zxing/">Android纯的二维码扫描界面和功能-zxing</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/11/Java多线程-CompletionService/">Java多线程-CompletionService</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/05/Java多线程-线程池ThreadPoolExecutor的submit返回值Future/">Java多线程-线程池ThreadPoolExecutor的submit返回值Future</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"><a href="/tags/版本控制/" style="font-size: 15px;">版本控制</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/动画/" style="font-size: 15px;">动画</a> <a href="/tags/多线程/" style="font-size: 15px;">多线程</a> <a href="/tags/文字识别/" style="font-size: 15px;">文字识别</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/源码/" style="font-size: 15px;">源码</a> <a href="/tags/翻墙/" style="font-size: 15px;">翻墙</a> <a href="/tags/读书/" style="font-size: 15px;">读书</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archive</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> À suivre</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Sitemap</a> |  <a href="/atom.xml">RSS</a> |  <a href="/about/">À propos</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">喵了个呜.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>